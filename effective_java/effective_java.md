## Java 最佳实践

>  ``Best Practice`` is designed to help you make effective use of the Java programming language and its fundamental libraries.



## 01 使用静态工厂方法替构造方法

静态工厂方法的优点是：

1. 与构造方法不同，它们是有名字的。[明显构造方法的名字，语义上并没有其他方法那么明确]
2. 与构造方法不同，它们不需要每次调用时创建一个新对象。[]
3. 与构造方法不同，它们可以返回其类型的任何子类型的对象。
4. 静态工厂可以返回对象的类可以根据输入参数的不同而不同。
5. 在编写包含该方法的类时，返回的对象的类不需要存在的。



静态工厂方法的缺点是：

1. 静态工厂的方法的主要限制是，**没有公共或受保护构造方法的类不能被子类化。**
2. 静态工厂方法不容易被程序猿找到。



下面是一些静态工厂方法的常用名称：

1. from 类型转方法
2. of
3. valueOf
4. Create or new Instance
5. getType
6. newType
7. type 





## 02 当构造方法参数过多时使用builder模式



## 03 使用私有构造方法或枚举实现 singleton 模式



## 04 使用私有构造方法执行非实例化



## 05 使用依赖注入取代硬链接资源 hardwiring resources



## 06 避免创建不必要的对象

两个建议

1. 尽量使用可重用的对象，不要重复创建新的相同功能的对象

2. 优先使用基本类型而不是装箱的基本类型，也要注意无意识的自动装箱。

   

❤️ **我们尽量选择重用对象而不是创建一个新的相同功能的对象**。重用可以更快更流行。如果对象是不可变的，它总是可以被重用。例如说下面的例子

```java
String s = new String("snike");
```

这句代码创建了两个对象，这样浪费了资源。假设 ``snike`` 是可以重用的，我们应该改为

```java
String s = "snike";
```

另外一种是我们尽量通过使用静态工厂方法和构造器，可以避免不需要的对象。例如 ``Boolean.of(String)`` 比 ``new Boolean(String)`` 更加可取。后者在 Java 9 中被弃用。构造方法每次调用时都必须创建一个新对象，而工厂方法永远不需要这样做，在实践中也不需要。除了重用不可变对象，如果知道它们不会被修改，还可以重用可变对象。

当一个对象是不可变的时，很明显它可以被安全地重用，但是在其他情况下，它远没有那么明显，甚至是违反直觉的。





❤️ **优先使用基本类型而不是装箱的基本类型，也要注意无意识的自动装箱**。这是为什么呢？





## 07 消除过期的对象引用



## 08 避免使用 Finalize 和 Cleaner 机制



## 09 使用 try-with-resource 语句代替 try-finally 语句



## 10 重写 equals 方法时遵守通用约定



